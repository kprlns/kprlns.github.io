<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>
</head>
<body>

<div>
    <h3>Лабораторная работа №4</h3>
    <h3>Выполнил студент группы 8о-106М Капраов Никита</h3>
    <h3></h3>
    <h3>
        Цель работы:  разработать страницу для просмотра справочника в формате таблицы.
        Получение данных с сервера должно производиться с помощью функций Ajax
    </h3>
    <h3>Тема: Книги</h3>
    <h3>Вариант:
    <br>
        <ol>
            <li>Данные хранятся в CSV</li>
            <li>Метод get</li>
            <li>Вспомогательная функция param</li>
        </ol>
    </h3>


</div>



<label for="selection">Выберите книгу</label>
<select id="selection">
    <option id="lotr" value="Властелин Колец">Властелин Колец</option>
    <option id="metro" value="Метро 2033">Метро 2033</option>
    <option id="chairs" value="12 Стульев">12 Стульев</option>
</select>

<table border="1" align="center">
    <tr align="center">
        <td width="200">Название</td>
        <td width="200">Автор</td>
        <td width="100">Дата первой публикации</td>
        <td width="200">Жанр</td>
        <td width="500">Описание</td>
    </tr>
    <tr id="tr1" align="center" hidden>
        <td id="name" width="200"></td>
        <td id="author" width="200"></td>
        <td id="time" width="100"></td>
        <td id="genre" width="200"></td>
        <td id="description" width="500"></td>
    </tr>
</table>





<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    function update(event) {
        $("#name").html("");
        $("#author").html("");
        $("#time").html("");
        $("#genre").html("");
        $("#description").html("");


        $("#tr1").removeAttr("hidden")
        const params = {name: $("#selection").val()};
        console.log($("#lotr").attr("value"));
        const urlParam = $.param(params);
        console.log(urlParam);
        $.get(`http://localhost:63342/Web/task4/getName.php?${urlParam}`,
            (data) => {$("#name").html(data);});
        $.get(`http://localhost:63342/Web/task4/getAuthor.php?${urlParam}`,
            (data) => {$("#author").html(data);});
        $.get(`http://localhost:63342/Web/task4/getTime.php?${urlParam}`,
            (data) => {$("#time").html(data);});
        $.get(`http://localhost:63342/Web/task4/getGenre.php?${urlParam}`,
            (data) => {$("#genre").html(data);});
        $.get(`http://localhost:63342/Web/task4/getGenre.php?${urlParam}`,
            (data) => {$("#genre").html(data);});
        $.get(`http://localhost:63342/Web/task4/getDescription.php?${urlParam}`,
            (data) => {$("#description").html(data);})
    }
    $("#selection").change(update)
</script>

</body>
</html>